/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{565:function(wa,ta,h){function pa(){return!1}function na(ea,ba,ca){if(!(ba in w))return!0;ba=w[ba];for(var x=0;x<ba.length;x++){var fa=ea;var z=ba[x];var ma=ca;if(z.name in fa){var ia="",ja=!1;fa=fa[z.name];switch(z.type){case "s":ia="String";ja=Object(la.isString)(fa);break;case "a":ia="Array";ja=Object(la.isArray)(fa);break;case "n":ia="Number";ja=Object(la.isNumber)(fa)&&Object(la.isFinite)(fa);break;case "o":ia="Object",
ja=Object(la.isObject)(fa)&&!Object(la.isArray)(fa)}ja||ma.reject('Expected response field "'+z.name+'" to have type '+ia);z=ja}else ma.reject('Response missing field "'+z.name+'"'),z=!1;if(!z)return!1}return!0}function oa(ea){for(var ba=0,ca=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ba<ca.length;ba++){var x=ca[ba],fa=x;x=x.charAt(0).toUpperCase()+x.slice(1);ea[fa]&&(Object.defineProperty(ea,x,Object.getOwnPropertyDescriptor(ea,
fa)),delete ea[fa])}return ea}h.r(ta);var ka=h(0),la=h(1);h.n(la);var ha=h(3);wa=h(54);var aa=h(33),y=h(583),r=h(118),n=h(475),e=h(50),b=h(204),f=function(){function ea(){this.request=this.result=null;this.state=0;var ba=this;ba.promise=new Promise(function(ca,x){ba.resolve=function(){if(0===ba.state||4===ba.state)ba.state=1,ba.result=arguments[0],ca.apply(null,arguments)};ba.reject=function(){if(0===ba.state||4===ba.state)ba.state=2,x.apply(null,arguments)}})}ea.prototype.Lw=function(){return 1===
(this.state&1)};ea.prototype.kua=function(){return 2===(this.state&2)};ea.prototype.Lk=function(){return!this.kua()&&!this.Lw()};ea.prototype.Ita=function(){return 4===(this.state&4)};ea.prototype.iU=function(){this.state|=4};return ea}(),a=function(){function ea(){this.tw={};this.qc=[]}ea.prototype.pop=function(){var ba=this.qc.pop();this.tw[ba.key]=void 0;return ba};ea.prototype.push=function(ba,ca){ca={key:ba,data:ca};this.qc.push(ca);this.tw[ba]=ca.data};ea.prototype.contains=function(ba){return!!this.tw[ba]};
ea.prototype.get=function(ba){return this.tw[ba]};ea.prototype.set=function(ba,ca){var x=this;this.tw[ba]=ca;this.qc.forEach(function(fa,z){fa.key===ba&&(x.qc[z]=fa)})};ea.prototype.remove=function(ba){var ca=this;this.tw[ba]=void 0;this.qc.forEach(function(x,fa){x.key===ba&&ca.qc.splice(fa,1)})};ea.prototype.length=function(){return this.qc.length};return ea}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",
type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};h=function(){function ea(ba,ca,x){var fa=this;this.SU=this.A0=!1;this.Ei=this.hL=this.ny=this.Gf=this.Gz=this.kr=this.Fz=this.zp=
null;this.ap=new f;this.Fs=new f;this.sG=!1;this.Pg=this.Kf=this.Lf=this.Dg=null;this.lh=[];this.lH=[];this.cache={};this.timeStamp=0;this.xi=[];this.Vk=[];this.nP=null;this.l0=!1;this.i9=this.id=null;this.ZR=this.H3=pa;this.Ej=0;this.RQ=!1;this.U5=1;this.Rk={};this.lv=0;this.vx=new a;ca.endsWith("/")||(ca+="/");x=x||{};this.A0=x.disableWebsockets||!1;this.SU=x.singleServerMode||!1;null!=x.customQueryParameters&&Object(e.b)("wvsQueryParameters",x.customQueryParameters);ca.endsWith("blackbox/")||(ca+=
"blackbox/");this.zp=x.uploadData||null;this.ny=x.uriData||null;this.Fz=x.cacheKey||null;if(this.kr=x.officeOptions||null)this.kr=oa(this.kr);this.Gf=x.rasterizerOptions||null;this.Gz=x.cadOptions||null;this.dg=ca;this.NO=ba;this.ur(!0);this.Dv=(new y.a(ca,null,this.mj())).Koa(!this.A0,function(z){fa.hwa(z)},function(){return null},function(){fa.sG=!1},function(){fa.Sza()})}ea.prototype.Vka=function(){var ba=this;return new Promise(function(ca,x){var fa=new XMLHttpRequest;fa.open("GET",ba.dg+"ck");
fa.withCredentials=ba.mj();fa.onreadystatechange=function(){fa.readyState===XMLHttpRequest.DONE&&(200===fa.status?ca():x())};fa.send()})};ea.prototype.PBa=function(ba){this.H3=ba||pa;this.ZR=pa};ea.prototype.cja=function(){this.C8();return this.Dv.Ss(!0)};ea.prototype.C8=function(){Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(ba){switch(ba.label){case 0:return this.Fs=new f,this.ap=new f,this.sG=!1,this.id=null,this.l0=!1,[4,this.Vka()];case 1:return ba.ba(),[2]}})})};
ea.prototype.Sza=function(){this.H3();this.C8();this.Dg&&(this.Dg.Lk()?this.Ji(this.Dg.request):this.Dg.Lw()&&this.ZR(this.Dg.result.url,"pdf")&&(this.Dg=null,this.A8()));this.Pg&&this.Pg.Lk()&&this.Ji(this.Pg.request);this.Lf&&this.Lf.Lk()?this.Ji(this.Lf.request):this.Kf&&this.Kf.Lk()&&this.o3();var ba;for(ba=0;ba<this.xi.length;ba++)this.xi[ba]&&(this.xi[ba].Lk()?this.Ji(this.xi[ba].request):this.xi[ba].Lw()&&this.ZR(this.xi[ba].result.url,"image")&&(this.xi[ba]=null,this.XJ(Object(la.uniqueId)(),
ba)));for(ba=0;ba<this.Vk.length;ba++)this.Vk[ba]&&this.Vk[ba].Lk()&&!this.Vk[ba].Ita()&&this.Ji(this.Vk[ba].request);for(ba=0;ba<this.lh.length;ba++)this.lh[ba]&&this.lh[ba].Lk()&&this.Ji(this.lh[ba].request)};ea.prototype.ata=function(){return this.sG?Promise.resolve():(this.sG=!0,this.timeStamp=Date.now(),this.Dv.uI())};ea.prototype.WEa=function(){var ba=this,ca,x,fa,z,ma;return new Promise(function(ia,ja){if(ba.zp)ca=new FormData,ca.append("file",ba.zp.fileHandle,ba.zp.fileHandle.name),ba.kr&&
ca.append("officeOptions",JSON.stringify(ba.kr)),ba.Gf&&ca.append("rasterizerOptions",JSON.stringify(ba.Gf)),ba.Gz&&ca.append("cadOptions",ba.Gz.getJsonString()),ba.Fz&&ca.append("cacheKey",ba.Fz),x=ba.zp.loadCallback,z="upload",fa=ba.zp.extension;else if(ba.ny)ca={uri:ba.ny.uri,iJa:ba.ny.shareId},ca=Object.keys(ca).map(function(sa){return sa+"="+(ca[sa]?encodeURIComponent(ca[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",x=ba.ny.loadCallback,z="url",fa=ba.ny.extension;
else{ia();return}var ra=new XMLHttpRequest,qa=Object(aa.k)(ba.dg,"AuxUpload");qa=Object(b.a)(qa,{type:z,ext:fa});ra.open("POST",qa);ra.withCredentials=ba.mj();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);ba.NO=sa.uri;x(sa);ia(sa)}});ra.addEventListener("error",function(){ja(ra.statusText+" "+JSON.stringify(ra))});ba.zp&&null!=ba.zp.onProgress&&(ra.upload.onprogress=function(sa){ba.zp.onProgress(sa)});
ra.send(ca)})};ea.prototype.Hza=function(ba){this.password=ba||null;this.ap.Lw()||(this.ap=new f,this.Ji({t:"pages"}));return this.ap.promise};ea.prototype.KC=function(ba){this.nP=ba||null;this.ap.Lw()||this.Ji({t:"pages"});return this.ap.promise};ea.prototype.Rz=function(ba){ba=Object.assign(ba,{uri:encodeURIComponent(this.NO)});this.nP&&(ba.ext=this.nP);this.Ei&&(ba.c=this.Ei);this.password&&(ba.pswd=this.password);this.Fz&&(ba.cacheKey=this.Fz);this.kr&&(ba.officeOptions=this.kr);this.Gf&&(ba.rastOptions=
this.Gf);this.Gz&&(ba.cadOptions=this.Gz.mImpl);return ba};ea.prototype.zAa=function(){0<this.vx.length()&&10>=this.lv&&this.AAa(this.vx.pop().data)};ea.prototype.oia=function(ba){0<this.vx.length()&&this.vx.contains(ba)&&this.vx.remove(ba)};ea.prototype.Ji=function(ba){ba=this.Rz(ba);this.Dv.send(ba)};ea.prototype.d9=function(ba,ca){10<this.lv?this.vx.push(ba,ca):(this.lv++,ba=this.Rz(ca),this.Dv.send(ba))};ea.prototype.AAa=function(ba){this.lv++;ba=this.Rz(ba);this.Dv.send(ba)};ea.prototype.Xn=
function(ba){return ba};ea.prototype.G3=function(ba){this.SU&&ba?Object(ha.j)("Server failed health check. Single server mode ignoring check."):!this.zHa&&ba&&3>=this.Ej?(this.RQ=!0,this.Dv.Ss()):3<this.Ej&&(this.SU=!0)};ea.prototype.hwa=function(ba){var ca=this,x=ba.data,fa=ba.err,z=ba.t;switch(z){case "upload":fa?this.XEa.reject(fa):this.XEa.resolve("Success");break;case "pages":fa?this.ap.reject(fa):na(x,z,this.ap)&&this.ap.resolve(x);break;case "config":if(fa)this.Fs.reject(fa);else if(na(x,z,
this.Fs)){this.G3(x.unhealthy);x.id&&(this.id=x.id);if(x.auth){var ma=Object(e.a)("wvsQueryParameters");ma.auth=x.auth;Object(e.b)("wvsQueryParameters",ma)}x.serverVersion&&(this.hL=x.serverVersion,Object(ha.h)("[WebViewer Server] server version: "+this.hL));x.serverID?(this.Ej=x.serverID===this.i9&&this.RQ?this.Ej+1:0,this.i9=x.serverID):this.Ej=0;this.RQ=!1;this.Fs.resolve(x)}break;case "health":fa?this.Fs.reject(fa):na(x,z,this.Fs)&&this.G3(x.unhealthy);break;case "pdf":x.url=Object(b.a)(this.dg+
"../"+encodeURI(x.url));fa?this.Dg.reject(fa):na(x,z,this.Dg)&&this.Dg.resolve(x);break;case "ApString2Xod":x.url=Object(b.a)(this.dg+"../data/"+encodeURI(x.url));fa?this.Rk[x.rID].reject(fa):na(x,z,this.Rk[x.rID])&&this.Rk[x.rID].resolve(x);break;case "docmod":x.url=Object(b.a)(this.dg+"../"+encodeURI(x.url));fa?this.Rk[x.rID].reject(fa):na(x,z,this.Dg)&&this.Rk[x.rID].resolve(x);break;case "xod":if(fa)this.Lf&&this.Lf.Lk()&&this.Lf.reject(fa),this.Kf&&this.Kf.Lk()&&this.Kf.reject(fa);else if(x.notFound)x.noCreate||
this.Lf&&this.Lf.Lk()&&this.Lf.resolve(x),this.Kf&&this.Kf.Lk()&&this.Kf.resolve(x);else{x.url&&(x.url=Object(b.a)(this.dg+"../"+encodeURI(x.url)));if(!this.Kf||this.Kf.Lw())this.Kf=new f,this.Kf.request={t:"xod",noCreate:!0};this.Lf||(this.Lf=new f,this.Lf.request={t:"xod"});this.Kf.resolve(x);this.Lf.resolve(x)}break;case "cAnnots":ma=this.Pg;if(fa)ma.reject(fa);else if(na(x,z,ma)){ma.iU();var ia=[],ja=x.annots;x=function(Ea){var Fa=ja[Ea].s,Da=ja[Ea].e,Oa=ra.dg+"../"+encodeURI(ja[Ea].xfdf),Ha=
"true"===ja[Ea].hasAppearance?Object(b.a)(Oa+".xodapp"):null,Ia=Object(la.range)(Fa,Da+1);ia[Ea]={range:Ia,promise:new Promise(function(Na,Qa){var Ta=new XMLHttpRequest;Ta.open("GET",Object(b.a)(Oa));Ta.responseType="text";Ta.withCredentials=ca.mj();Ta.addEventListener("load",function(){Ta.readyState===Ta.DONE&&200===Ta.status&&Na({vu:Ta.response,Ln:Ha,range:Ia})});Ta.addEventListener("error",function(){Qa(Ta.statusText+" "+JSON.stringify(Ta))});Ta.send()})}};var ra=this;for(fa=0;fa<ja.length;fa++)x(fa);
ma.resolve(ia)}break;case "annots":if(fa)this.Pg.reject(fa);else if(na(x,z,this.Pg)){this.Pg.iU();var qa=new XMLHttpRequest;ma=this.dg+"../"+encodeURI(x.url);var sa=x.hasAppearance?Object(b.a)(ma+".xodapp"):null;qa.open("GET",Object(b.a)(ma));qa.responseType="text";qa.withCredentials=this.mj();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ca.Pg.resolve({vu:qa.response,Ln:sa})});qa.addEventListener("error",function(){ca.Pg.reject(qa.statusText+" "+JSON.stringify(qa))});
qa.send()}break;case "image":this.lv--;var va=this.xi[x.p];fa?va.promise.reject(fa):na(x,z,va)&&(va.result=x,va.result.url=Object(b.a)(this.dg+"../"+encodeURI(va.result.url)),va.resolve(va.result));break;case "tiles":this.lv--;va=x.rID;ma=this.lh[va];this.lh[va]=null;this.lH.push(va);if(fa)ma.reject(fa);else if(na(x,z,ma)){for(fa=0;fa<x.tiles.length;fa++)x.tiles[fa]=Object(b.a)(this.dg+"../"+encodeURI(x.tiles[fa]));ma.resolve(x)}break;case "text":va=this.Vk[x.p];if(fa)va.reject(fa);else if(na(x,z,
va)){va.iU();var xa=new XMLHttpRequest;x=Object(b.a)(this.dg+"../"+encodeURI(x.url));xa.open("GET",x);xa.withCredentials=this.mj();xa.addEventListener("load",function(){xa.readyState===xa.DONE&&200===xa.status&&(va.result=JSON.parse(xa.response),va.resolve(va.result))});xa.addEventListener("error",function(Ea){va.reject(xa.statusText+" "+JSON.stringify(Ea))});xa.send()}break;case "progress":"loading"===x.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[x.bytes,x.total])}this.zAa();!z&&ba.echo&&
ba&&"apstring2xod"===ba.echo.t&&(ba=ba.echo.reqID)&&(2<=parseInt(this.hL,10)?this.Rk[ba].reject("Message unhandled by server"):this.Rk[ba].reject())};ea.prototype.ypa=function(){return Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(ba){switch(ba.label){case 0:return[4,this.ata()];case 1:return ba.ba(),[2,this.Fs.promise]}})})};ea.prototype.dpa=function(ba){for(var ca=this,x=new XMLHttpRequest,fa=Object(b.a)(this.dg+"aul",{id:this.id}),z=new FormData,ma={},ia=0;ia<ba.body.length;ia++){var ja=
ba.body[ia];ma[ja.id]=ja.wN.w+";"+ja.wN.h;z.append(ja.id,ja.wN.dataString)}ba={t:"apstring2xod",reqID:this.U5++,parts:ma};var ra=this.Rz(ba);z.append("msg",JSON.stringify(ra));this.Rk[ra.reqID]=new f;x.open("POST",fa);x.withCredentials=this.mj;fa=new Promise(function(qa,sa){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?qa():sa("An error occurred while sending down appearance strings to the server"))}});x.send(z);return fa.then(function(){return ca.Rk[ra.reqID].promise})};ea.prototype.gja=
function(){var ba=this.hL.split("-")[0].split("."),ca=["1","5","9"];if(3!==ba.length)throw Error("Invalid WVS version length.");if(3!==ca.length)throw Error("Invalid version length.");for(var x=0;x<ba.length;++x){if(ca.length===x||ba[x]>ca[x])return-1;if(ba[x]!==ca[x])return 1}return 0};ea.prototype.As=function(){return 0>=this.gja()};ea.prototype.zP=function(){this.Pg||(this.Pg=new f,this.As()?this.Pg.request={t:"cAnnots"}:this.Pg.request={t:"annots"},this.Ji(this.Pg.request));return this.Pg.promise};
ea.prototype.XJ=function(ba,ca){this.xi[ca]||(this.xi[ca]=new f,this.xi[ca].request={t:"image",p:ca},this.d9(ba,this.xi[ca].request));return this.xi[ca].promise};ea.prototype.Iza=function(ba){this.Vk[ba]||(this.Vk[ba]=new f,this.Vk[ba].request={t:"text",p:ba},this.Ji(this.Vk[ba].request));return this.Vk[ba].promise};ea.prototype.Jza=function(ba,ca,x,fa,z){var ma=this.lh.length;this.lH.length&&(ma=this.lH.pop());this.lh[ma]=new f;this.lh[ma].request={t:"tiles",p:ca,z:x,r:fa,size:z,rID:ma};this.d9(ba,
this.lh[ma].request);return this.lh[ma].promise};ea.prototype.A8=function(){this.Dg||(this.Dg=new f,this.Dg.request={t:"pdf"},this.l0?this.Dg.resolve({url:this.NO}):this.Ji(this.Dg.request));return this.Dg.promise};ea.prototype.z2=function(ba){var ca=this,x=new XMLHttpRequest,fa=Object(b.a)(this.dg+"aul",{id:this.id}),z=new FormData,ma={};ba.annots&&(ma.annots="xfdf");ba.watermark&&(ma.watermark="png");ba.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.U5++,parts:ma};ba.print&&(ma.print=
!0);var ia=this.Rz(ma);z.append("msg",JSON.stringify(ia));return Promise.all([ba.annots,ba.watermark,ba.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var ra=ja[0],qa=ja[1];ja=ja[2];ra&&z.append("annots",ra);qa&&z.append("watermark",qa);ja&&z.append("redactions",ja);ca.Rk[ia.reqID]=new f;x.open("POST",fa);x.withCredentials=ca.mj;ra=new Promise(function(sa,va){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?sa():va("An error occurred while sending down annotation data to the server"))}});
x.send(z);return ra.then(function(){return ca.Rk[ia.reqID].promise})})};ea.prototype.o3=function(){this.Kf||(this.Kf=new f,this.Kf.request={t:"xod",noCreate:!0},this.Ji(this.Kf.request));return this.Kf.promise};ea.prototype.Kza=function(){this.Lf||(this.Lf=new f,this.Lf.request={t:"xod"},this.Ji(this.Lf.request));return this.Lf.promise};ea.prototype.rr=function(){return!0};ea.prototype.request=function(){};ea.prototype.O7=function(){};ea.prototype.abort=function(){for(var ba=0;ba<this.lh.length;ba++)this.lh[ba]&&
(this.lh[ba].resolve(null),this.lh[ba]=null,this.lH.push(ba));this.close()};ea.prototype.lK=function(ba){this.Ei=this.Ei||{};this.Ei.headers=ba};ea.prototype.ur=function(ba){this.Ei=this.Ei||{};this.Ei.internal=this.Ei.internal||{};this.Ei.internal.withCredentials=ba};ea.prototype.mj=function(){return this.Ei&&this.Ei.internal?this.Ei.internal.withCredentials:null};ea.prototype.getFileData=function(){return Promise.reject()};return ea}();Object(wa.a)(h);Object(n.a)(h);Object(n.b)(h);ta["default"]=
h},583:function(wa,ta,h){var pa=h(0),na=h(3),oa=h(33),ka=h(50),la=h(204),ha=h(93),aa=function(){function r(n,e,b,f,a,w){void 0===b&&(b=null);void 0===f&&(f=null);void 0===a&&(a=null);void 0===w&&(w=null);this.q5=!1;this.Ej=0;this.d_=this.sFa(n);this.url=e?this.d_+"/"+e:this.d_+"/ws";this.zO=b;this.eC=f;this.Pz=a;this.wT=w}r.prototype.sFa=function(n){var e=n.indexOf("://"),b="ws://";0>e?e=0:(5===e&&(b="wss://"),e+=3);var f=n.lastIndexOf("/");0>f&&(f=n.length);return b+n.slice(e,f)};r.prototype.send=
function(n){this.Gr.readyState===WebSocket.CLOSED||this.q5||this.Gr.send(JSON.stringify(n))};r.prototype.uI=function(){return Object(pa.b)(this,void 0,void 0,function(){var n,e=this;return Object(pa.d)(this,function(){n=Object(ka.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ka.b)("wvsQueryParameters",n);return[2,new Promise(function(b,f){var a=Object(la.a)(e.url);e.Gr=new WebSocket(a);e.Gr.onopen=function(){e.eC&&e.eC();b()};e.Gr.onerror=function(w){e.q5=!0;f(w)};e.Gr.onclose=function(w){var ea=
w.code;return Object(pa.b)(e,void 0,void 0,function(){var ba=this;return Object(pa.d)(this,function(ca){switch(ca.label){case 0:return this.Pz&&this.Pz(),3E3===ea?[3,3]:8>this.Ej++?[4,new Promise(function(x){return setTimeout(function(){return Object(pa.b)(ba,void 0,void 0,function(){return Object(pa.d)(this,function(fa){switch(fa.label){case 0:return this.wT(),[4,this.uI()];case 1:return fa.ba(),x(),[2]}})})},3E3)})]:[3,2];case 1:return ca.ba(),[3,3];case 2:f(ha.a),ca.label=3;case 3:return[2]}})})};
e.Gr.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?e.send({hb:!0}):w.end?close():e.zO(w))}})]})})};r.prototype.Ss=function(n){void 0===n&&(n=!1);this.Ej=0;n?this.Gr.close(3E3):this.Gr.close();return Promise.resolve()};return r}(),y=function(){function r(n,e,b,f,a,w,ea){void 0===f&&(f=null);void 0===a&&(a=null);void 0===w&&(w=null);void 0===ea&&(ea=null);this.Ej=this.WJ=this.id=0;this.kB=!1;this.request=null;n=this.Pxa(n);this.url=e?n+"/"+e+"pf":n+"/pf";this.aL=b;this.zO=f;this.eC=a;
this.Pz=w;this.wT=ea}r.prototype.Pxa=function(n){var e=n.lastIndexOf("/");0>e&&(e=n.length);return n.slice(0,e)};r.prototype.vka=function(n){n=n.split("\n");for(n[n.length-1]&&n.pop();0<n.length&&3>n[n.length-1].length;)"]"===n.pop()&&(this.id=0);0<n.length&&3>n[0].length&&n.shift();for(var e=0;e<n.length;++e)n[e].endsWith(",")&&(n[e]=n[e].substr(0,n[e].length-1));return n};r.prototype.M8=function(){return Object(pa.b)(this,void 0,void 0,function(){var n=this;return Object(pa.d)(this,function(e){switch(e.label){case 0:return 8>
this.Ej++?[4,new Promise(function(b){return setTimeout(function(){n.wT();n.uI();b()},3E3)})]:[3,2];case 1:e.ba(),e.label=2;case 2:return[2]}})})};r.prototype.Rxa=function(n){Object(pa.b)(this,void 0,void 0,function(){var e,b;return Object(pa.d)(this,function(f){switch(f.label){case 0:e=null,b=0,f.label=1;case 1:if(!(b<n.length))return[3,6];e=JSON.parse(n[b]);if(!e)return[3,5];if(!e.end)return[3,2];close();return[3,5];case 2:if(!e.id||Number(e.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");
this.Ss();return[4,this.M8()];case 3:return f.ba(),[3,5];case 4:e.hb&&Number(e.id)===this.id?this.send({hb:!0}):this.kB||this.zO(e),f.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};r.prototype.dwa=function(n){Object(pa.b)(this,void 0,void 0,function(){var e,b,f;return Object(pa.d)(this,function(a){switch(a.label){case 0:if(!(3<=n.readyState))return[3,2];try{e=n.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<e)try{b=this.vka(n.responseText),0===this.id&&0<b.length&&
(f=JSON.parse(b.shift()),this.id=f.id,this.Ej=0),this.Rxa(b)}catch(w){}return this.kB?[3,2]:[4,this.j1()];case 1:a.ba(),a.label=2;case 2:return[2]}})})};r.prototype.j1=function(){return Object(pa.b)(this,void 0,void 0,function(){var n=this;return Object(pa.d)(this,function(){return[2,new Promise(function(e,b){function f(){return Object(pa.b)(n,void 0,void 0,function(){return Object(pa.d)(this,function(w){switch(w.label){case 0:b(),this.Ss(),w.label=1;case 1:return this.kB&&8>this.Ej?[4,this.M8()]:
[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}n.request=new XMLHttpRequest;n.request.withCredentials=n.aL;var a=Object(la.a)(n.url,0!==n.id?{id:String(n.id),uc:String(n.WJ)}:{uc:String(n.WJ)});n.WJ++;n.request.open("GET",a,!0);n.request.setRequestHeader("Cache-Control","no-cache");n.request.setRequestHeader("X-Requested-With","XMLHttpRequest");n.request.onreadystatechange=function(){n.dwa(n.request)};n.request.addEventListener("error",f);n.request.addEventListener("timeout",f);n.request.addEventListener("load",
function(){n.eC&&n.eC();e()});n.request.send()})]})})};r.prototype.uI=function(){var n=Object(ka.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ka.b)("wvsQueryParameters",n);this.WJ=this.id=0;this.kB=!1;return this.j1()};r.prototype.send=function(n){var e=this,b=new XMLHttpRequest;b.withCredentials=this.aL;var f=Object(la.a)(this.url,{id:String(this.id)}),a=new FormData;a.append("data",JSON.stringify(n));b.addEventListener("error",function(){e.Ss()});b.open("POST",f);b.setRequestHeader("X-Requested-With",
"XMLHttpRequest");b.send(a)};r.prototype.Ss=function(){this.id=0;this.kB=!0;this.Pz&&this.Pz();this.request.abort();return Promise.resolve()};return r}();wa=function(){function r(n,e,b){this.K_=n;this.target=e;this.aL=b}r.prototype.Koa=function(n,e,b,f,a){void 0===n&&(n=!0);void 0===e&&(e=null);void 0===b&&(b=null);void 0===f&&(f=null);void 0===a&&(a=null);return n?new aa(this.K_,this.target,e,b,f,a):new y(this.K_,this.target,this.aL,e,b,f,a)};return r}();ta.a=wa}}]);}).call(this || window)
